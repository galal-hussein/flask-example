machine:
  services:
    - docker

dependencies:
  override:
    - docker build -t husseingalal/flask-example .

test:
  override:
    - docker run -it -e DATABASE_URL='' -e APP_SETTINGS='config.TestConfig' -v $PWD:/app husseingalal/flask-example python manage.py test

deployment:
  hub:
    branch: master
    commands:
      - curl -H "Content-Type: application/json" --data '{"build" : true}' -X POST https://registry.hub.docker.com/u/husseingalal/flask-example/trigger/14d0e764-d9df-4a3a-8903-870a2b0dcb77/
